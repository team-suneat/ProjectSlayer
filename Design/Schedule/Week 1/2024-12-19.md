# 12월 19일 금요일 (Day 4)

## 메인 HUD 구현 (UI) (12/18 이월)

### 재화 관리 (VCurrency 사용)
- [x] 재화 사용처 구현
  - [x] 재화 획득 시 VCurrency.Add() 호출 (자동으로 CURRENCY_EARNED 이벤트 발생)
  - [x] 재화 양 조회 시 VCurrency.GetAmount() 호출
  - [x] 재화 소비 시 VCurrency.CanUseOrNotify() 검증 후 VCurrency.Use() 호출
  - [x] 재화 부족 시 안내 처리 (UINoticeManager를 통해 자동 처리)
  - [x] 인게임 재화 초기화 시 VCurrency.ClearIngameCurrencies() 호출 (골드만 초기화)
- [x] 재화 이벤트 연동
  - [x] GlobalEventType.CURRENCY_EARNED 이벤트 리스너 구현 (UI 업데이트용)
  - [x] GlobalEventType.CURRENCY_PAYED 이벤트 리스너 구현 (UI 업데이트용)
  - [x] GlobalEventType.CURRENCY_SHORTAGE 이벤트 리스너 구현 (재화 부족 알림용)
- [x] 게임 데이터 로드 시 처리
  - [x] VCurrency.OnLoadGameData() 호출 처리 (현재 비어있음, 필요 시 구현)

### 재화 상시 표시 UI (HUDCurrency 사용)
- [x] 재화 표시 UI 연동 개선
  - [x] UI 자동 업데이트 확인 및 필요 시 개선

### Notice 시스템 구현
- [x] UINoticeManager 구현
  - [x] Notice UI 컴포넌트 중앙 관리
  - [x] 재화 부족 이벤트 자동 리스닝
  - [x] Notice 생성 및 완료 시 자동 제거
- [x] UINoticeBase 부모 클래스 구현
  - [x] 공통 기능 추출 (Show, FadeInOut, OnCompleted 이벤트)
  - [x] UICurrencyShortageNotice 리팩토링
  - [x] UIStageTitleNotice 리팩토링
- [x] UICurrencyShortageNotice 구현
  - [x] 재화 부족 알림 Notice 컴포넌트
  - [x] Format_Currency_Shortage 포맷 문자열 사용
  - [x] UINoticeBase 상속
- [x] UIStatPointShortageNotice 구현
  - [x] 스탯 포인트 부족 알림 Notice 컴포넌트
  - [x] Format_StatPoint_Shortage 포맷 문자열 사용
  - [x] UINoticeBase 상속
- [x] UIExperienceShortageNotice 구현
  - [x] 경험치 부족 알림 Notice 컴포넌트
  - [x] Format_Experience_Shortage 포맷 문자열 사용
  - [x] UINoticeBase 상속
- [x] GlobalEventType 이벤트 추가
  - [x] STAT_POINT_SHORTAGE 이벤트 추가
  - [x] EXPERIENCE_SHORTAGE 이벤트 추가
- [x] 데이터 모델 OrNotify 메서드 추가
  - [x] VCharacterGrowth에 CanConsumeStatPoint, CanConsumeStatPointOrNotify 메서드 추가
  - [x] VCharacterLevel에 CanLevelUp, CanLevelUpOrNotify 메서드 추가
- [x] ResourcesManager.UI.cs Spawn 메서드 추가
  - [x] SpawnStatPointShortageNotice 메서드 추가
  - [x] SpawnExperienceShortageNotice 메서드 추가
- [x] UINoticeManager 이벤트 리스너 추가
  - [x] STAT_POINT_SHORTAGE 이벤트 리스너 구현
  - [x] EXPERIENCE_SHORTAGE 이벤트 리스너 구현
  - [x] SpawnStatPointShortageNotice 메서드 추가
  - [x] SpawnExperienceShortageNotice 메서드 추가
- [x] 버튼 클릭 로직 수정
  - [x] UIGrowthButton.OnButtonClick()에서 CanConsumeStatPointOrNotify 사용
  - [x] UICharacterLevelUpButton.OnButtonClick()에서 CanLevelUpOrNotify 사용

### 스테이지 진행률 게이지 UI
- [ ] 진행률 게이지 UI 컴포넌트
  - [ ] 스테이지 진행률 게이지 바
  - [ ] 현재 웨이브 / 전체 웨이브 표시 (예: 5/20)
  - [ ] 진행률 퍼센트 표시 (선택)
- [ ] 진행률 게이지 업데이트 시스템
  - [ ] 웨이브 클리어 시 진행률 업데이트
  - [ ] 스테이지 변경 시 진행률 리셋

### 지역 정보 표시
- [ ] 지역 이름 표시 UI
  - [ ] 현재 지역 이름 텍스트
  - [ ] 지역 번호 표시 (예: 1지역)
  - [ ] 지역 정보 업데이트

### 보스 도전 버튼
- [ ] 보스 도전 버튼 UI
  - [ ] 보스 버튼 컴포넌트
  - [ ] 버튼 활성화/비활성화 상태
  - [ ] 보스 도전 가능 여부 표시
- [ ] 보스 도전 기능
  - [ ] 언제든지 스테이지 보스 도전 기능
  - [ ] 보스 도전 시 모든 스킬 쿨타임 초기화

---

## 저장/로드 시스템 점검 및 보완 (12/17 이월)

### 추가 구현 필요 사항
- [ ] 주기적 자동 저장 구현
  - [ ] 저장 주기 설정 (예: 30초마다)
  - [ ] 저장 트리거 관리
  - [ ] 저장 실패 시 재시도 로직
- [ ] 게임 종료 시 저장 로직
  - [ ] OnApplicationPause 처리 (GameApp에 추가)
  - [ ] OnApplicationFocus 처리 (GameApp에 추가)
  - [ ] 강제 종료 대응 (가능한 범위 내)

### 세이브 파일 관리 테스트
- [ ] 세이브 파일 관리 테스트
  - [ ] 세이브 파일 생성/삭제 테스트
  - [ ] 세이브 파일 로드 검증 테스트
  - [ ] 세이브 파일 백업/복구 테스트
  - [ ] 데이터 마이그레이션 테스트
  - [ ] 저장 실패 시나리오 테스트

### 데이터 마이그레이션 코드 작성
- [ ] 기존 VCharacter 데이터를 새 구조로 변환
- [ ] 기존 VCharacterStat 데이터를 VCharacterEnhancement와 VCharacterGrowth로 분리
- [ ] 마이그레이션 테스트

---

## 시간 관리 시스템 구현 (데이터)

### 플레이 시간 기록 시스템
- [ ] PlayTimeManager 클래스 구현
  - [ ] 게임 시작 시간 기록
  - [ ] 게임 종료 시간 기록
  - [ ] 총 플레이 시간 계산
  - [ ] 세션별 플레이 시간 기록
- [ ] 플레이 시간 저장/로드
  - [ ] 플레이 시간 데이터 저장
  - [ ] 플레이 시간 데이터 로드

### 오프라인 시간 계산 시스템
- [ ] OfflineTimeManager 클래스 구현
  - [ ] 마지막 플레이 시간 기록
  - [ ] 현재 시간과 비교하여 오프라인 시간 계산
  - [ ] 오프라인 시간 제한 (최대 보상 시간 설정)
  - [ ] 오프라인 시간 검증 (시간 조작 방지)

---

## 통계/기록 시스템 구현 (데이터)

### 통계 기록 시스템
- [ ] StatisticsManager 클래스 구현
  - [ ] 총 플레이 시간 기록
  - [ ] 처치한 적 수 기록
  - [ ] 획득한 골드 기록
  - [ ] 클리어한 스테이지 기록
  - [ ] 통계 데이터 저장/로드
- [ ] 통계 업데이트 시스템
  - [ ] 실시간 통계 업데이트
  - [ ] 통계 변경 이벤트

---

## 1주차 통합 테스트
- [ ] HUD UI 통합 테스트
  - [ ] 모든 재화 표시 정상 동작 확인
  - [ ] 경험치 게이지 정상 동작 확인
  - [ ] 진행률 게이지 정상 동작 확인
- [ ] 데이터 시스템 통합 테스트
  - [ ] 재화 획득/소비 정상 동작 확인
  - [ ] 경험치 시스템 정상 동작 확인
  - [ ] 저장/로드 정상 동작 확인
- [ ] 버그 수정 및 안정화

---

## 향후 추가 예정 (Backlog)

### 데이터 저장 항목 확장
- [ ] 게임 데이터 저장 구조 확장
  - [ ] 퀘스트 진행도 데이터
  - [ ] 출석보상 데이터
  - [ ] 스킬 데이터
  - [ ] 장비 데이터

### 데이터 구조 확장
- [ ] VCharacter 구조 확장
  - [ ] 스킬 슬롯 해금 상태 필드 추가
- [ ] VCharacterEnhancement 확장
  - [ ] 성장 지식 필드 (괴력, 강철의 육체, 강인한 심장, 초인의 힘)
- [ ] VCompanion 시스템 구현
  - [ ] VCompanion 기본 클래스 구현
  - [ ] VCompanionInfo 클래스 구현
    - [ ] 동료 해금 상태 저장
    - [ ] 동료 레벨 저장 (플레이어와 별개)
    - [ ] 강화패시브 레벨 저장 (3개 카테고리)
    - [ ] 전직 정보 저장 (1~7차)
    - [ ] 승급 옵션 저장 (전직별)
  - [ ] VCompanionPromotionOption 클래스 구현
  - [ ] VProfile에 VCompanion 추가
- [ ] 신규 데이터 클래스 구현
  - [ ] VRelic 클래스 구현 (유물 데이터)
  - [ ] VSpirit 클래스 구현 (정령 데이터)
- [ ] VProfile 업데이트
  - [ ] VRelic 추가
  - [ ] VSpirit 추가
  - [ ] VCharacterPotion 제거
  - [ ] VCharacterItem 제거
  - [ ] VCharacterSlot 제거

