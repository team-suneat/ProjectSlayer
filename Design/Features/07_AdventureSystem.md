# 모험 시스템

> 세부 정보(지역/스테이지 이름, 드랍 테이블)는 [07_AdventureSystem_Details.md](./07_AdventureSystem_Details.md) 참조

---

## 7.1 고정 데이터 (Static Data)

게임 설정, 밸런스 수치 등 변경되지 않는 데이터

### 데이터 구조 설계

#### 지역 데이터 구조 (AreaData)
- `regionId`: 지역 ID (1~41)
- `regionName`: 지역 이름
- `description`: 지역 설명
- `unlockCondition`: 해금 조건 (이전 지역 클리어 등)
- `backgroundTheme`: 배경/테마 설정
- `qualityTier`: 품질 등급 (일반, 고급, 레어, 희귀, 영웅, 전설)
- `normalMonsters`: 일반 몬스터 7종 (유사 그룹 2종×2개, 상이 그룹 3종)
- `bossMonsters`: 보스 몬스터 5종 (스테이지 구간별)

#### 스테이지 데이터 구조 (StageData)
- `stageId`: 스테이지 ID (지역 내 1~20)
- `regionId`: 소속 지역 ID
- `stageName`: 스테이지 이름
- `dropItemRate`: 드랍 아이템 확률 (품질 등급, 장비 등급, 확률)
- `monsterCandidates`: 생성 몬스터 후보 (스테이지 규칙에 따른 일반 몬스터 종류 목록)
- `waveCount`: 웨이브 수 (기본 20웨이브)
- `monsterCountPerWave`: 웨이브당 생성 몬스터 수

#### 드랍 테이블 구조 (DropTable)
- `stageId`: 스테이지 ID
- `itemType`: 아이템 종류 (무기, 악세서리)
- `qualityTier`: 품질 등급 (일반, 고급, 레어, 희귀, 영웅, 전설)
- `equipmentGrade`: 장비 등급 (4등급 ~ 1등급)
- `dropRate`: 드랍 확률 (%)

#### 보상 데이터 구조 (RewardData)
- `stageClearReward`: 스테이지 클리어 보상
- `chestMonsterReward`: 상자 몬스터 처치 보상
  - `goldMultiplier`: 추가 골드 배율
  - `expMultiplier`: 추가 경험치 배율

### 지역/스테이지 데이터 구현
- [ ] AreaData 클래스/구조체 정의
- [ ] StageData 클래스/구조체 정의
- [ ] DropTable 클래스/구조체 정의
- [ ] RewardData 클래스/구조체 정의
- [ ] 지역 데이터 41개 입력 (→ [지역 목록](./07_AdventureSystem_Details.md#지역-목록))
- [ ] 스테이지 데이터 820개 입력 (→ [스테이지 목록](./07_AdventureSystem_Details.md#스테이지-목록))
  - [ ] 스테이지별 드랍 아이템 확률 설정 (→ [드랍 테이블](./07_AdventureSystem_Details.md#드랍-테이블))
  - [ ] 스테이지별 생성 몬스터 후보 설정 (→ [스테이지별 몬스터 등장 규칙](./07_AdventureSystem_Details.md#스테이지별-몬스터-등장-규칙))
  - [ ] 스테이지별 웨이브 수 설정 (기본 20)
  - [ ] 스테이지별 웨이브당 생성 몬스터 수 설정

### 몬스터 데이터 구조 설계 및 구현
#### 몬스터 데이터 구조 (MonsterData)
- `monsterId`: 몬스터 ID
- `monsterName`: 몬스터 이름
- `monsterType`: 몬스터 타입 (일반, 보스, 상자)
- `stats`: 스탯 (체력, 공격력, 방어력 등)
- `spawnPattern`: 스폰 위치/패턴
- `regionId`: 소속 지역 ID (일반 몬스터)
- `bossStageRange`: 보스 등장 스테이지 구간 (보스 몬스터)

#### 상자 몬스터 데이터 구조 (ChestMonsterData)
- `monsterId`: 상자 몬스터 ID
- `stats`: 스탯 (일반 몬스터 대비 배율)
- `rewardMultiplier`: 보상 배율
  - `goldMultiplier`: 골드 배율
  - `expMultiplier`: 경험치 배율

- [ ] MonsterData 클래스/구조체 정의
- [ ] ChestMonsterData 클래스/구조체 정의
- [ ] 지역별 일반 몬스터 7종 데이터 입력 (→ [지역별 몬스터 구성 규칙](./07_AdventureSystem_Details.md#지역별-몬스터-구성-규칙))
- [ ] 지역별 보스 몬스터 5종 데이터 입력
- [ ] 상자 몬스터 데이터 정의

### 드랍 데이터 구현
- [ ] 드랍 테이블 데이터 입력 (→ [드랍 테이블](./07_AdventureSystem_Details.md#드랍-테이블))
  - [ ] 지역별 품질 등급 매핑 (→ [품질 등급 체계](./07_AdventureSystem_Details.md#품질-등급-체계))
  - [ ] 스테이지별 드랍 아이템 종류 설정 (무기, 악세서리)
  - [ ] 스테이지별 장비 등급 설정 (4등급 ~ 1등급)
  - [ ] 스테이지별 드랍 확률 설정

### 보상 데이터 구현
- [ ] 스테이지 클리어 보상 데이터 정의
- [ ] 상자 몬스터 처치 보상 데이터 정의
  - [ ] 추가 골드 배율 설정
  - [ ] 추가 경험치 배율 설정

---

## 7.2 세이브 데이터 (Save Data)

플레이어 진행 상황 저장 데이터

### 진행 상황
- [ ] 현재 진행 중인 지역/스테이지/웨이브 저장
- [ ] 각 지역별 해금 상태 저장
- [ ] 각 스테이지별 클리어 상태 저장
- [ ] 각 스테이지별 최고 웨이브 기록 저장

### 통계 데이터
- [ ] 총 클리어한 스테이지 수
- [ ] 총 처치한 몬스터 수
- [ ] 총 처치한 상자 몬스터 수
- [ ] 지역별 플레이 시간

---

## 7.3 인게임 (In-Game Logic)

실제 게임플레이 로직

### 스테이지 진행
- [ ] 지역 선택 및 이동 처리
- [ ] 스테이지 시작/종료 처리
- [ ] 스테이지 클리어 판정

### 웨이브 진행
- [ ] 웨이브 시작/종료 처리
- [ ] 웨이브 클리어 판정
- [ ] 다음 웨이브 전환 처리
- [ ] 20웨이브 클리어 후 상자 몬스터 스폰
- [ ] 상자 몬스터 처치 후 웨이브 리셋 (1웨이브부터 재시작)

### 몬스터 관리
- [ ] 몬스터 스폰 관리
- [ ] 몬스터 처치 판정
- [ ] 상자 몬스터 등장/처치 처리

### 드랍 처리
- [ ] 드랍 확률 계산 및 적용
- [ ] 드랍 아이템 생성
- [ ] 드랍 아이템 획득 처리

### 보상 처리
- [ ] 스테이지 클리어 보상 지급
- [ ] 상자 몬스터 처치 보상 지급
  - [ ] 추가 골드 지급
  - [ ] 추가 경험치 지급

### 난이도 시스템
- [ ] 웨이브별 난이도 증가
- [ ] 지역/스테이지별 난이도 적용

---

## 7.4 UI (User Interface)

사용자 인터페이스

### 지역 선택 UI
- [ ] 지역 목록 표시
- [ ] 지역 정보 표시 (이름, 해금 상태, 진행률)
- [ ] 지역 선택 버튼

### 스테이지 선택 UI
- [ ] 스테이지 목록 표시
- [ ] 스테이지 정보 표시 (이름, 클리어 상태, 최고 웨이브)
- [ ] 스테이지 선택/시작 버튼

### 인게임 HUD
- [ ] 현재 지역/스테이지/웨이브 표시
- [ ] 웨이브 진행률 표시
- [ ] 남은 몬스터 수 표시

### 보상 UI
- [ ] 드랍 아이템 획득 알림
- [ ] 스테이지 클리어 보상 팝업
- [ ] 상자 몬스터 보상 팝업

### 진행률 UI
- [ ] 모험 전체 진행률 표시
- [ ] 지역별 진행률 표시
- [ ] 스테이지별 최고 기록 표시
